---
title: 'Data Analysis 2'
output:
  html_notebook:
    toc: true
    number_sections: true
  pdf_document: default
---


# Factors
http://stat545.com/block029_factors.html

* Levels for factors are strings; really just integers
* be careful of stealth packages

```{r}
library(tidyverse)
library(forcats)
library(gapminder)

summary(gapminder$continent)
# or fct_count
fct_count(gapminder$continent)


```

## Drop unused factors

```{r}
h_countries <- c("Egypt", "Haiti", "Romania", "Thailand", "Venezuela")
h_gap <- gapminder %>% filter(country %in% h_countries)
nlevels(h_gap$country)

# still has factors for all countries

# use droplevels or fct_drop()

```


## Change ordering

```{r}
## order by frequency
gapminder$continent %>% 
  fct_infreq() %>%
  levels() %>% head()

## backwards!
gapminder$continent %>% 
  fct_infreq() %>%
  fct_rev() %>% 
  levels() %>% head()

gapminder %>% group_by(year) %>% summarize(x = sum(lifeExp))

# recode the levels
i_gap <- gapminder %>% 
  filter(country %in% c("United States", "Sweden", "Australia")) %>% 
  droplevels()
i_gap$country %>% levels()
i_gap$country %>%
  fct_recode("USA" = "United States", "Oz" = "Australia") %>% levels()

```

* Use fct_reorder2() when you have a line chart of a quantitative x against another quantitative y and your factor provides the color. This way the legend appears in some order as the data! Contrast the legend on the left with the one on the right.

# Character Data
http://stat545.com/block028_character-data.html

# Getting Data in and Out of R
http://stat545.com/block026_file-out-in.html



